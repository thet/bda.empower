<tal:def
    define="path options/path;
            items python:view.itemtree.get(path, []);
            level options/level|python:0"
    condition="items"
    i18n:domain="bda.empower">

<div class="threaditem level-${level}" tal:repeat="item items">

  <tal:article replace="structure python:view.contribution_provider(item['ob'])"/>

  <tal:subthread
      define="subthread python:view.recurse(path=path + '/' + item['id'], level=level+1)"
      replace="structure subthread"
      condition="subthread"/>

</div>

</tal:def>
